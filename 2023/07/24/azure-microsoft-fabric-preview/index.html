<!doctype html><html lang=fr><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta charset=utf-8><meta name=robots content="noindex, nofollow, noarchive, nosnipper, noodp, noydir"><meta name=google content="notranslate, noimageindex"><meta name=slurp content="notranslate, noimageindex"><meta name=msnbot content="notranslate, noimageindex"><meta name=bingbot content="notranslate, noimageindex"><meta name=generator content="Hugo 0.129.0"><link rel=stylesheet href=https://www.pragmatias.fr//css/bootstrap.min.css><link rel=stylesheet href=https://www.pragmatias.fr//css/pragmatias.css><script src=https://www.pragmatias.fr//js/jquery-3.6.0.slim.min.js></script><script src=https://www.pragmatias.fr//js/popper.min.js></script><script src=https://www.pragmatias.fr//js/bootstrap.bundle.min.js></script><link rel=alternate type=application/rss+xml href=https://www.pragmatias.fr/feed.xml><title>Azure : Microsoft Fabric Preview</title><body><div class="navbar navbar-expand-md prag-bg-primary prag-header" role=navigation><div class="container-fluid justify-content-center"><div class=navbar-brand><a href=https://www.pragmatias.fr/blog/><img src=/images/logo_pragmatias.svg alt=pragmatias></a></div><button class="navbar-toggler justify-content-end prag-navbar" type=button data-toggle=collapse data-target=#navbarSupportedContent1,#navbarSupportedContent2 aria-controls=navbarSupportedContent1 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent1><ul class="navbar-nav text-center"><li class=nav-item><a class=nav-link href=https://www.pragmatias.fr/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=https://www.pragmatias.fr/tags/>Tags</a></li><li class=nav-item><a class=nav-link href=https://www.pragmatias.fr/archives/>Archives</a></li></ul></div><div class="collapse navbar-collapse justify-content-md-end" id=navbarSupportedContent2><ul class="navbar-nav flex-row justify-content-center"><li class=nav-item><a href=https://www.pragmatias.fr/en/2023/07/24/azure-microsoft-fabric-preview/ class="prag_header_svg mr-1 ml-1"><img src=/images/united-kingdom-flag-round-xs-24.png alt=English></a></li><li class=nav-item><a href=https://www.pragmatias.fr/feed.xml title="Pragmatias Blog" class="prag_header_svg mr-1 ml-1"><svg height="24" style="enable-background:new 0 0 508.52 508.52" viewBox="0 0 508.52 508.52" width="24" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M254.26.0C113.845.0.0 113.845.0 254.26s113.845 254.26 254.26 254.26 254.26-113.845 254.26-254.26C508.52 113.813 394.675.0 254.26.0zM137.141 412.441c-22.852.0-41.413-18.434-41.413-41.285.0-22.693 18.561-41.349 41.413-41.349 22.915.0 41.444 18.656 41.476 41.349C178.618 393.976 160.088 412.441 137.141 412.441zM241.197 412.791c0-39.029-15.16-75.674-42.62-103.071-27.46-27.524-63.978-42.716-102.785-42.716V207.38c113.177.0 205.315 92.137 205.315 205.41h-59.91zM347.001 412.727c0-138.603-112.669-251.399-251.145-251.399v-59.624c171.435.0 310.96 139.589 310.96 311.023H347.001z"/></svg></a></li><li class=nav-item><a href=mailto:contact@pragmatias.fr title=Mail class="prag_header_svg mr-1 ml-1"><svg height="24" style="enable-background:new 0 0 299.997 299.997" viewBox="0 0 299.997 299.997" width="24" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M149.996.0C67.157.0.001 67.158.001 149.997c0 82.837 67.156 150 149.995 150s150-67.163 150-150C299.996 67.158 232.835.0 149.996.0zM149.999 52.686l88.763 55.35H61.236l88.763-55.35zm89.869 143.737h-.009c0 8.878-7.195 16.072-16.072 16.072H76.211c-8.878.0-16.072-7.195-16.072-16.072v-84.865c0-.939.096-1.852.252-2.749l84.808 52.883c.104.065.215.109.322.169.112.062.226.122.34.179.599.309 1.216.558 1.847.721.065.018.13.026.195.041.692.163 1.393.265 2.093.265h.005c.005.0.01.0.01.0.7.0 1.401-.099 2.093-.265.065-.016.13-.023.195-.041.63-.163 1.245-.412 1.847-.721.114-.057.228-.117.34-.179.106-.06.218-.104.322-.169l84.808-52.883c.156.897.252 1.808.252 2.749v84.865z"/></svg></a></li><li><a href=https://github.com/pragmatias/ title=github class="prag_header_svg mr-1 ml-1"><svg height="24" style="enable-background:new 0 0 438.549 438.549" viewBox="0 0 438.549 438.549" width="24" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736 15.166 259.057 5.365 219.271 5.365c-39.781.0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168.0 184.854.0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562.0-.571-.049-5.708-.144-15.417-.098-9.709-.144-18.179-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289s4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136s11.704-.476 16.274-1.423c4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826.0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817.0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906C438.536 184.851 428.728 148.168 409.132 114.573z"/></svg></a></li></ul></div></div></div><div id=content><div class=container-fluid><article class="blog-post blog-post-with-toc"><header><h2 class=blog-post-title>Azure : Microsoft Fabric Preview</h2><div class=blog-post-date><span>Dernière modification : 24 Juillet 2023</span></div><div class=blog-post-date>Temps de lecture : 16 minute(s) - 3271 mots</div><div class=blog-post-tags><strong>Tags:</strong>
<a href=https://www.pragmatias.fr/tags/azure/>Azure</a>
<a href=https://www.pragmatias.fr/tags/microsoft-fabric/>Microsoft Fabric</a></div></header><aside class=prag-toc><h1 class=prag-toc-head>Sommaire</h1><div class=prag-toc-body><nav id=TableOfContents><ol><li><a href=#quest-ce-que-microsoft-fabric>Qu&rsquo;est ce que Microsoft Fabric</a><ol><li><a href=#synthèse>Synthèse</a></li><li><a href=#concernant-la-partie-lakehouse>Concernant la partie Lakehouse</a></li><li><a href=#concernant-la-partie-warehouse>Concernant la partie Warehouse</a></li><li><a href=#concernant-la-partie-kql-database>Concernant la partie KQL Database</a></li><li><a href=#concernant-la-partie-powerbi>Concernant la partie PowerBI</a></li><li><a href=#concernant-data-science>Concernant Data Science</a></li></ol></li><li><a href=#observations>Observations</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></aside><a id=showTopBtn href=# class=prag-sticky-bot><svg height="24" id="Layer_1" style="enable-background:new 0 0 438.533 438.533" viewBox="0 0 438.533 438.533" width="24" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M409.133 109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736 9.801 259.058.0 219.273.0c-39.781.0-76.47 9.801-110.063 29.407-33.595 19.604-60.192 46.201-79.8 79.796C9.801 142.8.0 179.489.0 219.267c0 39.78 9.804 76.463 29.407 110.062 19.607 33.592 46.204 60.189 79.799 79.798 33.597 19.605 70.283 29.407 110.063 29.407s76.47-9.802 110.065-29.407c33.593-19.602 60.189-46.206 79.795-79.798 19.603-33.596 29.403-70.284 29.403-110.062C438.533 179.485 428.732 142.795 409.133 109.203zM361.449 231.831l-25.981 25.981c-3.613 3.613-7.901 5.42-12.847 5.42-4.948.0-9.229-1.807-12.847-5.42l-53.954-53.961v143.32c0 4.948-1.813 9.232-5.428 12.847-3.613 3.62-7.898 5.427-12.847 5.427h-36.547c-4.948.0-9.231-1.807-12.847-5.427-3.617-3.614-5.426-7.898-5.426-12.847v-143.32l-53.959 53.961c-3.431 3.425-7.708 5.133-12.85 5.133-5.14.0-9.423-1.708-12.85-5.133l-25.981-25.981c-3.422-3.429-5.137-7.714-5.137-12.852.0-5.137 1.709-9.419 5.137-12.847l103.356-103.353 25.981-25.981c3.427-3.425 7.71-5.14 12.847-5.14 5.142.0 9.423 1.715 12.849 5.14l25.98 25.981 103.35 103.353c3.432 3.427 5.14 7.71 5.14 12.847C366.589 224.117 364.881 228.402 361.449 231.831z"/></svg>
</a><script>$(document).ready(function(){$("#showTopBtn").removeClass("prag-sticky-bot"),$("#showTopBtn").addClass("prag-sticky-hide"),$(function(){$(window).scroll(function(){$(this).scrollTop()>900?($("#showTopBtn").addClass("prag-sticky-bot"),$("#showTopBtn").removeClass("prag-sticky-hide")):($("#showTopBtn").addClass("prag-sticky-hide"),$("#showTopBtn").removeClass("prag-sticky-bot"))})})})</script><div class=blog-post-main><p>Suite à l&rsquo;annonce du passage en preview de la solution <a href=https://learn.microsoft.com/en-us/fabric/get-started/microsoft-fabric-overview>Microsoft Fabric</a>, j&rsquo;ai profité de la version d&rsquo;essai (Trial) en preview pour en faire un premier tour rapide.</p><p><em>Note n°1 : Certains termes resteront en anglais pour faciliter la compréhension</em></p><p><em>Note n°2 : Les informations se basent sur l&rsquo;état de la solution début Juillet 2023 en mode preview.</em></p><h1 id=quest-ce-que-microsoft-fabric>Qu&rsquo;est ce que Microsoft Fabric</h1><h2 id=synthèse>Synthèse</h2><p>Microsoft Fabric est une solution proposée par Microsoft pour regrouper de manière cohérente un ensemble de services se basant principalement sur les services Azure et permettant de couvrir l&rsquo;ensemble des besoins analytiques liés aux données.
<a href=/blog/web/20230724_Blog_MicrosoftFabric_01.png><img alt=schema_01 src=/blog/web/20230724_Blog_MicrosoftFabric_01.png></a></p><p>Les fondations de Microsoft Fabric reposent principalement sur les trois éléments suivants:</p><ul><li><a href=https://learn.microsoft.com/en-us/fabric/onelake/onelake-overview>OneLake</a></li><li>Un ensemble de SaaS (Software as a Service)</li><li>Des <a href=https://learn.microsoft.com/en-us/fabric/enterprise/licenses#capacity-and-skus>Capacity Fabric</a></li></ul><p><a href=/blog/web/20230724_Blog_MicrosoftFabric_02.png><img alt=schema_02 src=/blog/web/20230724_Blog_MicrosoftFabric_02.png></a></p><p>OneLake est un Data Lake unifié pour l&rsquo;ensemble d&rsquo;un Tenant (organisation) se basant sur <a href=https://learn.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-introduction>Azure Data Lake Gen2</a> permettant de centraliser la gouvernance et la gestion des données.</p><p>Pour la partie SaaS, on retrouve les éléments suivants (<em>qui seront enrichis dans le futur</em>) :</p><ul><li><strong>Data integration : Data Factory</strong><ul><li>Gestion des Dataflow (Gen2) et des Data pipeline</li></ul></li><li><strong>Data engineering : Synapse Data Engineering</strong><ul><li>Gestion des Lakehouse, Notebook, Apache Spark Job Definition</li></ul></li><li><strong>Data warehousing : Synapse Data Warehouse</strong><ul><li>Gestion des Warehouses</li></ul></li><li><strong>Data science : Synapse Data Science</strong><ul><li>Gestion des Models, Experiments et Notebooks</li></ul></li><li><strong>Real-time analytics : Synapse Real Time Analytics</strong><ul><li>Gestion des KQL Database, KQL Queryset, Eventstream</li></ul></li><li><strong>Business intelligence : Power BI</strong><ul><li>Gestion des Reports, Dashboards, Dataflow, Datamart, Dataset, &mldr;</li></ul></li></ul><p><em>Note : On peut observer que Microsoft Fabric s&rsquo;appuie principalement sur les services Azure Synapse et Power BI.</em></p><p>Concernant la notion de <a href=https://learn.microsoft.com/en-us/fabric/enterprise/licenses>Capacity Fabric</a> :</p><ul><li>L&rsquo;ensemble des services étant des services managés et serverless, la puissance à disposition est défini par une <strong>Capacity Fabric</strong></li><li>Une <strong>Capacity Fabric</strong> est propre à un Tenant (organisation) et il peut y en avoir plusieurs par organisation.</li><li>Chaque <strong>Capacity Fabric</strong> représente un ensemble de ressources distinct alloué à Microsoft Fabric et plus spécifiquement aux espaces de travail (Workspaces) concernés.</li><li>Le choix de la configuration d&rsquo;une <strong>Capacity Fabric</strong> va déterminer la puissance de calcul disponible et par conséquent les services managés utilisables.
Vous trouverez la liste des configurations dans la <a href=https://learn.microsoft.com/en-us/fabric/enterprise/licenses#capacity-and-skus>documentation officielle</a></li></ul><p>La hiérarchie des éléments :</p><ul><li>Niveau n°1 : OneLake est unique pour l&rsquo;ensemble d&rsquo;un Tenant</li><li>Niveau n°2 : Les <a href=https://learn.microsoft.com/en-us/fabric/get-started/workspaces>workspaces</a> (avec regroupement logique par <a href=https://learn.microsoft.com/en-us/fabric/governance/domains>domaine</a> possible)</li><li>Niveau n°3 : les ressources (Lakehouse, Warehouse, KQL Database, SQL Endpoint, &mldr;)</li><li>Niveau n°4 : les objets (Files, Tables, Dashboard, Notebooks, &mldr;)</li></ul><p>Un <a href=https://learn.microsoft.com/en-us/fabric/get-started/workspaces>workspace</a> est assigné à une <strong>Capacity Fabric</strong> et l&rsquo;ensemble des services managés utilise les ressources de cette <strong>Capacity Fabric</strong> pour s&rsquo;exécuter.</p><p>La centralisation de la gestion des droits (par rôles/utilisateurs) permet de gérer les accès par workspaces et de gérer les droits sur les éléments des différents services de manière simplifiée.</p><p>Par défaut, Microsoft Fabric propose une visualisation du <a href=https://learn.microsoft.com/en-us/fabric/governance/lineage>linéage</a> des objets au niveau d&rsquo;un workspace.
<a href=/blog/web/20230724_Blog_MicrosoftFabric_03.png><img alt=schema_03 src=/blog/web/20230724_Blog_MicrosoftFabric_03.png></a></p><h2 id=concernant-la-partie-lakehouse>Concernant la partie Lakehouse</h2><p>Un <a href=https://learn.microsoft.com/en-us/fabric/data-engineering/lakehouse-overview>Lakehouse</a> va permettre de stocker des données sous formes de fichiers ou de tables en utilisant par défaut l&rsquo;espace de stockage de OneLake.</p><p>Exemple de l&rsquo;interface du Lakehouse :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_04.png><img alt=schema_04 src=/blog/web/20230724_Blog_MicrosoftFabric_04.png></a></p><p>Deux moteurs sont utilisées :</p><ul><li>Apache Spark pour transformer et manipuler les données</li><li>Un moteur SQL pour accéder aux données en lecture en utilisant la syntaxe T-SQL</li></ul><p>Lors de la création d&rsquo;un Lakehouse, Microsoft Fabric créé par défaut deux éléments supplémentaires (<em>avec le même nom que le Lakehouse</em>) :</p><ul><li>Un SQL Endpoint (Moteur SQL)</li><li>Un Dataset par défaut (Représentation des données)</li></ul><p>Le SQL Endpoint permet d&rsquo;utiliser la syntaxe T-SQL pour accéder aux données des tables définies au niveau du Lakehouse en lecture seule.
Il permet aussi d&rsquo;accéder en lecture seule aux tables des autres Lakehouse et Warehouse du même workspace.</p><p>Il est possible de réaliser les actions suivantes avec un SQL Endpoint :</p><ul><li>Requêter les tables du Lakehouse et du Warehouse</li><li>Créer des vues et procédures permettant d&rsquo;encapsuler des requêtes en T-SQL</li><li>Gérer les droits sur les objets</li></ul><p>Le Dataset par défaut permet à PowerBI d&rsquo;accéder aux données des tables du Lakehouse.
Il est possible de créer des rapports PowerBI directement à partir des données du Lakehouse (<em>répertoire Tables uniquement</em>) en utilisant le dataset par défaut ou en créant un nouveau dataset et en définissant un modèle de données associé (<em>lien entre les objets</em>).</p><p>Le Lakehouse est composé de deux répertoires racines :</p><ul><li>Le répertoire <strong>Tables</strong> représente les données <strong>managées</strong> par le Lakehouse (<em>format Delta dont le stockage et les métadonnées sont gérés directement par le Lakehouse</em>)</li><li>Le répertoire <strong>Files</strong> représente les données <strong>non managées</strong> par le Lakehouse (<em>multiple format de données gérées par l&rsquo;utilisateur</em>)</li></ul><p>Il est possible de travailler avec les données dans le Lakehouse de plusieurs manières :</p><ul><li><strong>Upload</strong>: Télécharger des fichiers ou répertoires locaux vers le Lakehouse (<em>dans le répertoire <strong>Files</strong></em>) et charger les données dans le répertoire <strong>Tables</strong></li><li><strong><a href=https://learn.microsoft.com/en-us/fabric/data-factory/dataflows-gen2-overview>Dataflows (Gen2)</a></strong> : Importer et transformer des données à partir de nombreuses sources et charger les directement dans des tables du Lakehouse</li><li><strong>Data Factory pipelines</strong> : Copier des données et orchestrer les activités de transformations et chargement des données dans les répertoires Tables ou Files du Lakehouse</li><li><strong>Notebooks</strong> : Travailler de manière interactive avec les données avec Apache Spark (Scala, Java, Python, R &mldr;)</li><li><strong><a href=https://learn.microsoft.com/en-us/fabric/onelake/onelake-shortcuts>Shortcuts</a></strong> (Raccourcis) : Se connecter aux stockages externe (OneLake, Azure Data Lake Gen2, AWS S3)<ul><li>Il existe deux types de Shortcuts :<ul><li>Au niveau du répertoire Files, cela permet de faire un lien vers un espace de stockage externe pour travailler directement avec les données de manière sécurisée</li><li>Au niveau du répertoire Tables, cela permet de synchroniser une table avec une table d&rsquo;un autre Lakehouse</li></ul></li></ul></li></ul><p>Remarques :</p><ul><li>Si on crée plusieurs Lakehouses dans un même <a href=https://learn.microsoft.com/en-us/fabric/get-started/workspaces>workspace</a>, alors on aura plusieurs SQL Endpoints mais qui en réalité auront tous la même chaîne de connexion</li><li>La suppression d&rsquo;un Lakehouse supprime automatiquement le dataset par défaut et le SQL Endpoint associé</li></ul><p>Concernant le format des données utilisables au niveau du Lakehouse :</p><ul><li>Pour le répertoire Files : PARQUET, CSV, AVRO, JSON et tous les formats compatible avec Apache Hive</li><li>Pour le répertoire Tables : Le format par défaut est Delta</li></ul><p>Au niveau du stockage, les données sont par défaut stockées dans les espaces suivants :</p><ul><li>Chemin avec le nom des tables : <code>&lt;workspace name>@onelake.dfs.fabric.microsoft.com/&lt;lakehouse name>.Lakehouse/Tables/*</code></li><li>Chemin avec le nom des fichiers : <code>&lt;workspace name>@onelake.dfs.fabric.microsoft.com/&lt;lakehouse name>.Lakehouse/Files/*</code></li><li>Chemin avec les identifiants uniques (tables) : <code>&lt;workspace id>@onelake.dfs.fabric.microsoft.com/&lt;lakehouse id>/Tables/*</code></li></ul><h2 id=concernant-la-partie-warehouse>Concernant la partie Warehouse</h2><p>Ce service repose sur <a href=https://learn.microsoft.com/en-us/azure/synapse-analytics/sql/overview-architecture>Synapse Warehouse Serverless</a> permettant d&rsquo;utiliser la syntaxe T-SQL pour fournir l&rsquo;ensemble des opérations d&rsquo;une base de données (<em>insert, update, delete, select, grant, &mldr;</em>) sur les différents objets gérés.</p><p>Exemple de l&rsquo;interface du Warehouse :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_05.png><img alt=schema_05 src=/blog/web/20230724_Blog_MicrosoftFabric_05.png></a></p><p>Le stockage des données se trouve au niveau du OneLake et utilise le format Delta (<em>qui devrait être le format par défaut</em>).
<em>Remarque : dans la version preview, lorsque l&rsquo;on crée une table sans préciser le format de stockage alors on se retrouve avec le format par défaut de Hive (qui n’est pas le format Delta).</em></p><p>Ce service permet de mettre en place une couche de modélisation relationnelle au-dessus du stockage des données dans le Lakehouse et de profiter de l&rsquo;ensemble des caractéristiques d&rsquo;un Warehouse (<em>propriété ACID, concurrence, gestion des droits, organisation en schéma, modèle relationnel&mldr;</em>).
L&rsquo;exploration des données peut se faire très facilement directement avec des requêtes T-SQL ou des outils de reporting comme PowerBI.
L&rsquo;interface de Synapse Warehouse permet aussi de gérer les requêtes T-SQL (<em>création, sauvegarde, modification, &mldr;.</em>)</p><p>La création d&rsquo;un Warehouse dans un workspace génère les éléments suivants :</p><ul><li>Création des schémas par défaut : dbo, guest, INFORMATION_SCHEMA et sys</li><li>Création d&rsquo;un dataset par défaut ayant le même nom que le Warehouse pour l&rsquo;accès aux données avec PowerBI</li></ul><p>Remarque :</p><ul><li>A partir d&rsquo;un Warehouse, on peut accéder aux tables d&rsquo;un Lakehouse comme si c&rsquo;était simplement une base de données différente dont les objets sont stockée dans un schéma nommé <strong>dbo</strong> mais en lecture seule uniquement. Il n&rsquo;est pas possible de faire des requêtes de type DML (modification des données) sur les objets d&rsquo;un Lakehouse à partir d&rsquo;un Warehouse</li><li>Il faut que les données du Lakehouse soient copiées (<em>avec par exemple l&rsquo;utilisation de la fonctionnalité <a href=https://learn.microsoft.com/en-us/fabric/onelake/onelake-shortcuts>Shortcut</a></em>) dans le Warehouse pour être modifiées</li><li>Un Shortcut aura la même fonctionnalité pour une table du Warehouse que pour une table du Lakehouse</li></ul><p>Au niveau du stockage, les données sont par défaut stockée dans l&rsquo;espace suivant :</p><ul><li>Chemin au format abfss : <code>abfss://&lt;workspace id>@onelake.dfs.fabric.microsoft.com/&lt;warehouse id>/Tables/&lt;schema name>/&lt;table name></code></li><li>Chemin au format https : <code>https://onelake.dfs.fabric.microsoft.com/&lt;workspace id>/&lt;warehouse id>/Tables/&lt;schema name>/&lt;table name></code></li></ul><p>Information concernant la différence entre un SQL Endpoint et un Warehouse :</p><ul><li>Un SQL Endpoint est utilisé uniquement pour réaliser des requêtes de type <strong>select</strong> sur les données d&rsquo;un Lakehouse ou d&rsquo;un Warehouse</li><li>Un Warehouse est utilisé pour avoir l&rsquo;ensemble des fonctionnalités d&rsquo;une base de données en serverless (<em>transactions ACID, DML opérations, &mldr;</em>)
Vous trouverez plus d&rsquo;informations dans la <a href=https://learn.microsoft.com/en-us/fabric/data-warehouse/data-warehousing#compare-the-warehouse-and-the-sql-endpoint-of-the-lakehouse>documentation officielle</a>.</li></ul><h2 id=concernant-la-partie-kql-database>Concernant la partie KQL Database</h2><p><a href=https://learn.microsoft.com/en-us/azure/synapse-analytics/data-explorer/data-explorer-overview>Synapse Real-Time Analytics</a> est un service managé et serverless qui est optimisé pour le stockage et l&rsquo;analyse des données en temps réel.
Ce service s&rsquo;appuie sur une base de données KQL qui se base sur <a href=https://learn.microsoft.com/en-us/azure/data-explorer/data-explorer-overview>Data Explorer Database</a> et utilise le langage <a href=https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/>Kusto Query (KQL)</a> permettant uniquement de lire les données pour retourner un résultat.</p><p>Exemple de l&rsquo;interface de KQL Database :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_06.png><img alt=schema_06 src=/blog/web/20230724_Blog_MicrosoftFabric_06.png></a></p><p>Le service est constitué des éléments suivants :</p><ul><li>Une base de données Kusto (KQL Database) permettant de gérer des collections d&rsquo;objets de type tables, fonctions, vues matérialisées et Shortcuts.</li><li>La lecture et manipulation des données se fait avec des KQL Queryset qui permet uniquement d&rsquo;accéder et d&rsquo;appliquer des transformations aux données mais pas de modifier le contenu d&rsquo;une table.</li><li>La fonctionnalité <strong>Eventstream</strong> permet de facilement intégrer des données provenant de sources comme <strong>Event Hubs</strong>.</li></ul><p>Les objets d&rsquo;une KQL Database :</p><ul><li>Une table permet de stocker les données sous forme tabulaire (colonnes et lignes) et typées</li><li>Une fonction permet de définir une requête encapsulée pouvant être utilisée dans une requête KQL et pouvant avoir une liste de paramètre en entrée</li><li>Une vue matérialisée permet de pré-calculer le résultat d&rsquo;une requête encapsulée pour optimiser les temps d&rsquo;accès aux données</li><li>Un datastream est un ensemble d&rsquo;eventstreams KQL connectés et rattachés à la base de données (KQL Database)</li></ul><p>Au niveau du stockage :</p><ul><li>Chemin au format https : <code>https://francecentral-api.onelake.fabric.microsoft.com/&lt;workspace id>/&lt;KQL database id>/tables/&lt;table name></code></li></ul><p>Quelques informations supplémentaires sur KQL Database :</p><ul><li>Par défaut, KQL Database stocke les données dans un format en colonne, de cette manière le moteur n&rsquo;a besoin d&rsquo;accéder qu&rsquo;aux colonnes concernées par les requêtes au lieu de scanner l&rsquo;ensemble des données d&rsquo;un objet.</li><li>KQL database est optimisée pour les données qui sont uniquement lues, supprimées rarement et jamais mises à jour</li><li>KQL database est conçue pour accélérer l&rsquo;ingestion des données en n&rsquo;appliquant aucune des contraintes que l&rsquo;on retrouve sur les bases de données relationnelles (PK, FK, Check, Unicité, &mldr;).</li><li>KQL database gère les Shorcuts comme des tables externes.</li></ul><p><em>Note : Il n&rsquo;est pas possible de lire les données de KQL Database à partir du SQL Endpoint ou du Warehouse.</em></p><p>Vous trouverez plus d&rsquo;informations concernant la comparaison entre Synapse Real-Time Analytics et Azure Data Explorer dans la <a href=https://learn.microsoft.com/en-us/fabric/real-time-analytics/realtime-analytics-compare>documentation officielle</a>.</p><h2 id=concernant-la-partie-powerbi>Concernant la partie PowerBI</h2><p>C&rsquo;est le service le plus mis en avant dans la solution Microsoft Fabric.</p><p>Toutes les ressources et toutes les données gérées par Microsoft Fabric (<em>et stockées dans OneLake</em>) sont accessibles par <a href=https://powerbi.microsoft.com/en-us/blog/power-bi-embedded-with-microsoft-fabric/>PowerBI</a> pour valoriser les informations et mettre en place les rapports et analyses souhaités de manière très rapide.</p><p>L&rsquo;élément clé pour l&rsquo;utilisation de PowerBI est le Dataset.
Par défaut, lors de la création d&rsquo;un Lakehouse ou d&rsquo;un Warehouse, Microsoft Fabric crée automatiquement un dataset par défaut mais il est possible de créer ces propres datasets avec la modélisation souhaitée pour pouvoir utiliser les données avec PowerBI.</p><p>Concernant la notion de Dataset :</p><ul><li>Un dataset est une couche sémantique avec des métriques représentant un ensemble d&rsquo;objet stocké dans les différents services et utilisé pour la création des rapports et analyses</li><li>Les datasets sont automatiquement synchronisés avec l&rsquo;état des données dans le Lakehouse ou le Warehouse, il n&rsquo;y a pas de gestion ou de rafraîchissement spécifique à gérer</li><li>Les nouveaux objets d&rsquo;un Lakehouse ou d&rsquo;un Warehouse sont automatiquement ajoutés dans les datasets par défaut correspondant</li></ul><p>Il est très facile d&rsquo;accéder à l&rsquo;ensemble des objets par les datasets sur l&rsquo;ensemble des services (Lakehouse, Warehouse, KQL database) de Microsoft Fabric avec PowerBI et de partager les différents éléments créés avec d&rsquo;autres utilisateurs.</p><p>Je n&rsquo;ai pas pu tester l&rsquo;utilisation de l&rsquo;IA avec <a href=https://powerbi.microsoft.com/en-us/blog/introducing-microsoft-fabric-and-copilot-in-microsoft-power-bi/>Copilot</a> pour PowerBI qui est un élément mis en avant par Microsoft pour faciliter la création de rapports et de manière générale, l&rsquo;analyse des données par une population n&rsquo;étant pas experte sur PowerBI.</p><h2 id=concernant-data-science>Concernant Data Science</h2><p>Le service <a href=https://learn.microsoft.com/en-us/azure/synapse-analytics/machine-learning/what-is-machine-learning>Synapse Data Science</a> permet de gérer l&rsquo;ensemble des éléments (Notebooks, Models, Experiments) en s&rsquo;appuyant sur le framework MLflow pour travailler sur l’ensemble des besoins en Machine Learning.</p><p>L&rsquo;ensemble des éléments utilise <a href=https://mlflow.org/docs/latest/index.html>MLflow</a> qui est un framework open source permettant de tracer et gérer les expérimentations.</p><p>Concernant les notebooks :</p><ul><li>Ils permettent de travailler de manière interactive sur les données avec Apache Spark (Python, Scala, SQL, R)</li><li>Ils sont automatiquement rattachés à un cluster Apache Spark</li><li>Ils permettent de lire les données du Lakehouse en utilisant des dataframes Apache Spark ou Pandas.</li></ul><p>Concernant les expérimentations :</p><ul><li>Une expérimentation consiste à un ou plusieurs exécutions d&rsquo;une tâche d&rsquo;un notebook.</li><li>Il est possible de créer des expérimentations à partir de l&rsquo;interface utilisateur ou directement avec le framework MLflow</li></ul><p>Concernant les modèles :</p><ul><li>le framework MLflow permet de tracer et gérer les modèles au sein de Microsoft Fabric</li><li>A partir d&rsquo;une expérimentation, il est possible de sauvegarder l&rsquo;ensemble des éléments sous forme d&rsquo;un nouveau modèle avec l&rsquo;ensemble des métadonnées associées.</li></ul><h1 id=observations>Observations</h1><p>Attention : Afin d&rsquo;activer Microsoft Fabric (preview), il est indispensable d&rsquo;être un membre d&rsquo;un <strong>Azure Active Directory</strong> et d&rsquo;avoir le rôle <strong>Power BI Administrator</strong>.</p><p>L&rsquo;expérience utilisateur PowerBI est la base de l&rsquo;expérience utilisateur Microsoft Fabric.</p><p>Au niveau du workspace :</p><ul><li>Utilisation de Azure DevOps uniquement pour gérer les sources (<em>pas de github ou gitlab proposé</em>) au niveau du workspace</li><li>Cela manque d’un système de hiérarchie ou de répertoire pour organiser les différents éléments au sein d&rsquo;un workspace (<em>afin d&rsquo;améliorer sa compréhension et sa lisibilité</em>)</li><li>On doit se reposer sur une normalisation stricte du nommage des objets pour pouvoir les filtrer et trier efficacement</li><li>Il y un effet <strong>bordélique</strong> lorsque l&rsquo;on commence à avoir un certain nombre d&rsquo;élément dans un workspace comme cela est visible sur les écrans ci-dessous</li></ul><p>Visualisation des éléments au niveau du OneLake :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_07.png><img alt=schema_07 src=/blog/web/20230724_Blog_MicrosoftFabric_07.png></a>
<em>Note : Cette interface permet de voir les ressources créés (Lakehouse, Warehouse, KQL Database, SQL Endpoint, Dataset) mais pas directement les objets (fichier, tables, notebooks)</em></p><p>Visualisation des éléments au niveau d&rsquo;un workspace :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_08.png><img alt=schema_08 src=/blog/web/20230724_Blog_MicrosoftFabric_08.png></a>
<em>Note : Cette interface permet de voir l&rsquo;ensemble des éléments d&rsquo;un workspace (ressources et objets)</em></p><p>Afin de pouvoir naviguer, il est possible de filtrer par nom ou par type d&rsquo;éléments sur les différentes interfaces :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_09.png><img alt=schema_09 src=/blog/web/20230724_Blog_MicrosoftFabric_09.png></a></p><p>La gestion des notebooks est proche de celle de Databricks sans le versionning automatique.
Avec l&rsquo;explorateur (<em>se situant à gauche de l&rsquo;interface</em>), il est très simple de générer une syntaxe minimale pour le chargement des données (<em>Tables ou Files</em>) avec Apache Spark (<em>création automatique d&rsquo;une cellule avec le code minimal</em>)</p><p>Quelques limitations lorsque l&rsquo;on souhaite configurer un job Apache Spark :</p><ul><li>Utilisation d&rsquo;un script python uniquement</li><li>Possibilité de télécharger un fichier local ou de récupérer un fichier d&rsquo;un stockage ADLS Gen2</li><li>Possibilité d&rsquo;ajouter une ligne de commande</li><li>Possibilité d&rsquo;ajouter un Lakehouse de référence pour pouvoir utiliser les chemins relatifs (Files/&mldr;)</li><li>Limitation de la configuration du job cluster :<ul><li>Choix de l&rsquo;ordonnancement</li><li>Choix du runtime Apache spécifique à Microsoft Fabric (voir la <a href=https://learn.microsoft.com/en-us/fabric/data-engineering/runtime>documentation officielle</a>)</li><li>Aucun choix concernant la configuration des workers</li><li>Configuration des &ldquo;retry&rdquo; en cas d&rsquo;erreur</li></ul></li></ul><p>Partage des données :</p><ul><li>Les données du Lakehouse ne semblent pas partagées par défaut avec le Warehouse contrairement au SQL Endpoint qui lui a accès directement au tables du Lakehouse dans le schéma par défaut <strong>dbo</strong> (<em>même schéma par défaut que le Warehouse</em>)</li><li>A partir d&rsquo;un SQL Endpoint, on peut ajouter ou enlever les Warehouse et Lakehouse souhaités du même workspace (<em>afin de les visualiser dans l&rsquo;explorateur</em>)</li><li>Définition des clés étrangères entre les différents objets dans l&rsquo;onglet <strong>Model</strong> pour pouvoir utiliser plus facilement le <strong>Visual Query</strong> (<em>et pour PowerBI</em>)</li><li>Interface très peu efficace lorsque l&rsquo;on souhaite faire des modifications dans l&rsquo;onglet <strong>Model</strong><ul><li>Dès que l&rsquo;on clique sur une colonne pour la rendre invisible, il y a 1 à 2 secondes d&rsquo;attente à cause du rafraîchissement de l&rsquo;ensemble des objets de l&rsquo;interface, par conséquent lorsque l&rsquo;on souhaite réaliser cette action plusieurs fois c&rsquo;est extrêmement lent et désagréable</li></ul></li><li>Lorsque l&rsquo;on veut créer un rapport :<ul><li>Dans le panneau <strong>Data</strong>, on visualise l&rsquo;ensemble des objets (<em>tables et vues</em>) même ceux ne faisant pas partie du <strong>Model</strong> défini</li></ul></li></ul><p>Dans une logique d&rsquo;architecture en médaillon, on se retrouve avec deux possibilités :</p><ol><li>Utilisation d&rsquo;un Lakehouse unique pour l&rsquo;ensemble des zones<ul><li>Les Zones Bronze et Silver se retrouvent au niveau de deux sous-répertoires différents dans le répertoire <strong>Files</strong> du Lakehouse</li><li>La Zone Gold se retrouve au niveau des tables du Lakehouse (<em>pas de fonctionnement de schéma</em>)<ul><li>Cela rendra accessible uniquement les données de la zone Gold au plus grand nombre d&rsquo;usage par l&rsquo;utilisation d&rsquo;un SQL Endpoint ou d&rsquo;un Warehouse</li></ul></li></ul></li><li>Utilisation d&rsquo;un Lakehouse par zone<ul><li>Permet de tout gérer au niveau des tables de chaque zone (par Lakehouse) et de profiter de l&rsquo;ensemble des fonctionnalités offertes sur l&rsquo;ensemble des zones</li><li>Surcoût en terme de ressources et de gestion des droits</li></ul></li></ol><p>Pour la gouvernance des données, il est possible d&rsquo;utiliser <a href=https://learn.microsoft.com/en-us/fabric/governance/microsoft-purview-fabric>Microsoft Purview avec Microsoft Fabric</a> et de mettre en place une capture du linéage des données.</p><p>Il y a une partie Monitoring permettant de suivre l&rsquo;exécution des traitements/activités au niveau du tenant mais pas des ressources/services directement.
<a href=/blog/web/20230724_Blog_MicrosoftFabric_10.png><img alt=schema_10 src=/blog/web/20230724_Blog_MicrosoftFabric_10.png></a></p><h1 id=conclusion>Conclusion</h1><p>C&rsquo;est clairement une offre cohérente qui permet d&rsquo;avoir un usage démultiplié des données en limitant la duplication des données sur différents espaces de stockage.</p><p>La centralisation de la gestion des données permet de faciliter la gouvernance et le partage des données.</p><p>Il y a une réelle volonté de pousser PowerBI comme la solution unique d&rsquo;analyse des données.</p><p>C&rsquo;est une direction très intéressante dans la centralisation des données afin de limiter l&rsquo;effet silos et de faciliter le partage des données et la centralisation de la gouvernance (<em>dans une approche Data Mesh par exemple</em>).</p><p>Il y a un axe important du développement qui porte sur le principe du no-code (ou low-code) afin de pouvoir travailler sur les données sans écrire de code en se basant sur les services Synapse principalement.
Cela est une bonne idée pour pouvoir gérer/utiliser les données par des utilisateurs qui ne sont pas Data Engineer dans le cadre d&rsquo;expérimentation et de démonstration mais lorsque l&rsquo;on souhaite industrialiser efficacement la gestion des données et des traitements, cela devient une contrainte pouvant être très coûteuse en temps et en énergie.</p><p>En ajoutant le fait que l&rsquo;on ne peut pas gérer la configuration des ressources qui s’appuie directement sur une Capacity Fabric, on se retrouve avec une facilité d&rsquo;utilisation des données mais avec une perte de maîtrise des ressources et par conséquent des coûts.
<em>Note : Petite exception pour le Pool Apache Spark qui permet de gérer quelques paramètres comme le nombre et le type des workers</em></p><p><strong>En conclusion</strong>, Microsoft Fabric est une solution tout en un et clé en main pour permettre à tout type d&rsquo;utilisateurs de gérer et manipuler de la données dans un espace unifié mais je pense qu&rsquo;une solution comme Databricks ou Snowflake permet d&rsquo;être beaucoup plus efficace (<em>performance, coût, industrialisation</em>) tout en gardant l&rsquo;utilisation du service PowerBI pour l&rsquo;approche Lakehouse, Warehouse, Data Science, la centralisation de la gouvernance de données et la maîtrise des coûts mais ne permettra pas à une population avec peu de compétence technique de travailler correctement avec les données.</p></div></article></div></div><footer><div class="container-fluid prag-bg-primary prag-foot">Généré avec <a href=https://gohugo.io/>Hugo</a>
&nbsp; - &nbsp;
<a href=https://en.wikipedia.org/wiki/WTFPL>WTFPL license</a> © 2018–2024</div></footer></body></html>