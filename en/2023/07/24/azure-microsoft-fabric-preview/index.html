<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta charset=utf-8><meta name=robots content="noindex, nofollow, noarchive, nosnipper, noodp, noydir"><meta name=google content="notranslate, noimageindex"><meta name=slurp content="notranslate, noimageindex"><meta name=msnbot content="notranslate, noimageindex"><meta name=bingbot content="notranslate, noimageindex"><meta name=generator content="Hugo 0.125.2"><link rel=stylesheet href=https://www.pragmatias.fr//css/bootstrap.min.css><link rel=stylesheet href=https://www.pragmatias.fr//css/pragmatias.css><script src=https://www.pragmatias.fr//js/jquery-3.6.0.slim.min.js></script><script src=https://www.pragmatias.fr//js/popper.min.js></script><script src=https://www.pragmatias.fr//js/bootstrap.bundle.min.js></script><link rel=alternate type=application/rss+xml href=https://www.pragmatias.fr/en/feed.xml><title>Azure : Microsoft Fabric Preview</title><body><div class="navbar navbar-expand-md prag-bg-primary prag-header" role=navigation><div class="container-fluid justify-content-center"><div class=navbar-brand><a href=https://www.pragmatias.fr/en/blog/><img src=/images/logo_pragmatias.svg alt=pragmatias></a></div><button class="navbar-toggler justify-content-end prag-navbar" type=button data-toggle=collapse data-target=#navbarSupportedContent1,#navbarSupportedContent2 aria-controls=navbarSupportedContent1 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent1><ul class="navbar-nav text-center"><li class=nav-item><a class=nav-link href=https://www.pragmatias.fr/en/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=https://www.pragmatias.fr/en/tags/>Tags</a></li><li class=nav-item><a class=nav-link href=https://www.pragmatias.fr/en/archives/>Archives</a></li></ul></div><div class="collapse navbar-collapse justify-content-md-end" id=navbarSupportedContent2><ul class="navbar-nav flex-row justify-content-center"><li class=nav-item><a href=https://www.pragmatias.fr/2023/07/24/azure-microsoft-fabric-preview/ class="prag_header_svg mr-1 ml-1"><img src=/images/france-flag-round-xs-24.png alt=Français></a></li><li class=nav-item><a href=https://www.pragmatias.fr/en/feed.xml title="Pragmatias Blog" class="prag_header_svg mr-1 ml-1"><svg height="24" style="enable-background:new 0 0 508.52 508.52" viewBox="0 0 508.52 508.52" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M254.26.0C113.845.0.0 113.845.0 254.26s113.845 254.26 254.26 254.26 254.26-113.845 254.26-254.26C508.52 113.813 394.675.0 254.26.0zM137.141 412.441c-22.852.0-41.413-18.434-41.413-41.285.0-22.693 18.561-41.349 41.413-41.349 22.915.0 41.444 18.656 41.476 41.349C178.618 393.976 160.088 412.441 137.141 412.441zM241.197 412.791c0-39.029-15.16-75.674-42.62-103.071-27.46-27.524-63.978-42.716-102.785-42.716V207.38c113.177.0 205.315 92.137 205.315 205.41h-59.91zM347.001 412.727c0-138.603-112.669-251.399-251.145-251.399v-59.624c171.435.0 310.96 139.589 310.96 311.023H347.001z"/></svg></a></li><li class=nav-item><a href=mailto:contact@pragmatias.fr title=Mail class="prag_header_svg mr-1 ml-1"><svg height="24" style="enable-background:new 0 0 299.997 299.997" viewBox="0 0 299.997 299.997" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M149.996.0C67.157.0.001 67.158.001 149.997c0 82.837 67.156 150 149.995 150s150-67.163 150-150C299.996 67.158 232.835.0 149.996.0zM149.999 52.686l88.763 55.35H61.236l88.763-55.35zm89.869 143.737h-.009c0 8.878-7.195 16.072-16.072 16.072H76.211c-8.878.0-16.072-7.195-16.072-16.072v-84.865c0-.939.096-1.852.252-2.749l84.808 52.883c.104.065.215.109.322.169.112.062.226.122.34.179.599.309 1.216.558 1.847.721.065.018.13.026.195.041.692.163 1.393.265 2.093.265h.005c.005.0.01.0.01.0.7.0 1.401-.099 2.093-.265.065-.016.13-.023.195-.041.63-.163 1.245-.412 1.847-.721.114-.057.228-.117.34-.179.106-.06.218-.104.322-.169l84.808-52.883c.156.897.252 1.808.252 2.749v84.865z"/></svg></a></li><li><a href=https://github.com/pragmatias/ title=github class="prag_header_svg mr-1 ml-1"><svg height="24" style="enable-background:new 0 0 438.549 438.549" viewBox="0 0 438.549 438.549" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736 15.166 259.057 5.365 219.271 5.365c-39.781.0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168.0 184.854.0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562.0-.571-.049-5.708-.144-15.417-.098-9.709-.144-18.179-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289s4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136s11.704-.476 16.274-1.423c4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826.0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817.0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906C438.536 184.851 428.728 148.168 409.132 114.573z"/></svg></a></li></ul></div></div></div><div id=content><div class=container-fluid><article class="blog-post blog-post-with-toc"><header><h2 class=blog-post-title>Azure : Microsoft Fabric Preview</h2><div class=blog-post-date><span>Last update : 24 July 2023</span></div><div class=blog-post-date>Reading time : 14 minute(s) - 2870 words</div><div class=blog-post-tags><strong>Tags:</strong>
<a href=https://www.pragmatias.fr/en/tags/azure/>Azure</a>
<a href=https://www.pragmatias.fr/en/tags/microsoft-fabric/>Microsoft Fabric</a></div></header><aside class=prag-toc><h1 class=prag-toc-head>Summary</h1><div class=prag-toc-body><nav id=TableOfContents><ol><li><a href=#what-is-microsoft-fabric>What is Microsoft Fabric</a><ol><li><a href=#overview>Overview</a></li><li><a href=#about-the-lakehouse-part>About the Lakehouse part</a></li><li><a href=#about-the-warehouse-part>About the Warehouse part</a></li><li><a href=#about-the-kql-database-part>About the KQL Database part</a></li><li><a href=#about-the-powerbi-part>About the PowerBI part</a></li><li><a href=#about-the-data-science-part>About the Data Science part</a></li></ol></li><li><a href=#comments>Comments</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></aside><a id=showTopBtn href=# class=prag-sticky-bot><svg height="24" id="Layer_1" style="enable-background:new 0 0 438.533 438.533" viewBox="0 0 438.533 438.533" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:" d="M409.133 109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736 9.801 259.058.0 219.273.0c-39.781.0-76.47 9.801-110.063 29.407-33.595 19.604-60.192 46.201-79.8 79.796C9.801 142.8.0 179.489.0 219.267c0 39.78 9.804 76.463 29.407 110.062 19.607 33.592 46.204 60.189 79.799 79.798 33.597 19.605 70.283 29.407 110.063 29.407s76.47-9.802 110.065-29.407c33.593-19.602 60.189-46.206 79.795-79.798 19.603-33.596 29.403-70.284 29.403-110.062C438.533 179.485 428.732 142.795 409.133 109.203zM361.449 231.831l-25.981 25.981c-3.613 3.613-7.901 5.42-12.847 5.42-4.948.0-9.229-1.807-12.847-5.42l-53.954-53.961v143.32c0 4.948-1.813 9.232-5.428 12.847-3.613 3.62-7.898 5.427-12.847 5.427h-36.547c-4.948.0-9.231-1.807-12.847-5.427-3.617-3.614-5.426-7.898-5.426-12.847v-143.32l-53.959 53.961c-3.431 3.425-7.708 5.133-12.85 5.133-5.14.0-9.423-1.708-12.85-5.133l-25.981-25.981c-3.422-3.429-5.137-7.714-5.137-12.852.0-5.137 1.709-9.419 5.137-12.847l103.356-103.353 25.981-25.981c3.427-3.425 7.71-5.14 12.847-5.14 5.142.0 9.423 1.715 12.849 5.14l25.98 25.981 103.35 103.353c3.432 3.427 5.14 7.71 5.14 12.847C366.589 224.117 364.881 228.402 361.449 231.831z"/></svg>
</a><script>$(document).ready(function(){$("#showTopBtn").removeClass("prag-sticky-bot"),$("#showTopBtn").addClass("prag-sticky-hide"),$(function(){$(window).scroll(function(){$(this).scrollTop()>900?($("#showTopBtn").addClass("prag-sticky-bot"),$("#showTopBtn").removeClass("prag-sticky-hide")):($("#showTopBtn").addClass("prag-sticky-hide"),$("#showTopBtn").removeClass("prag-sticky-bot"))})})})</script><div class=blog-post-main><p>Following the announcement of the preview release of <a href=https://learn.microsoft.com/en-us/fabric/get-started/microsoft-fabric-overview>Microsoft Fabric</a>, I used the trial version to take a quick tour.</p><p><em>Note : Information is based on the state of the solution at the beginning of July 2023 in preview mode.</em></p><h1 id=what-is-microsoft-fabric>What is Microsoft Fabric</h1><h2 id=overview>Overview</h2><p>Microsoft Fabric is a solution proposed by Microsoft to bring together a coherent set of services based primarily on Azure services, covering all data-related analytical needs.
<a href=/blog/web/20230724_Blog_MicrosoftFabric_01.png><img alt=schema_01 src=/blog/web/20230724_Blog_MicrosoftFabric_01.png></a></p><p>The foundations of Microsoft Fabric are based primarily on the following three elements :</p><ul><li><a href=https://learn.microsoft.com/en-us/fabric/onelake/onelake-overview>OneLake</a></li><li>A package of SaaS (Software as a Service)</li><li><a href=https://learn.microsoft.com/en-us/fabric/enterprise/licenses#capacity-and-skus>Capacity Fabric</a></li></ul><p><a href=/blog/web/20230724_Blog_MicrosoftFabric_02.png><img alt=schema_02 src=/blog/web/20230724_Blog_MicrosoftFabric_02.png></a></p><p>OneLake is a unified Data Lake for an entire Tenant (organization) based on <a href=https://learn.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-introduction>Azure Data Lake Gen2</a>, enabling centralized data governance and management.</p><p>On the SaaS side, we have the following elements (<em>which will be enhanced in the future</em>) :</p><ul><li><strong>Data integration : Data Factory</strong><ul><li>Dataflows (Gen2) and pipelines management</li></ul></li><li><strong>Data engineering : Synapse Data Engineering</strong><ul><li>Lakehouse, Notebooks and Apache Spark Job Definition management</li></ul></li><li><strong>Data warehousing : Synapse Data Warehouse</strong><ul><li>Warehouses management</li></ul></li><li><strong>Data science : Synapse Data Science</strong><ul><li>Models, Experiments and Notebooks management</li></ul></li><li><strong>Real-time analytics : Synapse Real Time Analytics</strong><ul><li>KQL Database, KQL Queryset and Eventstream management</li></ul></li><li><strong>Business intelligence : Power BI</strong><ul><li>Reports, Dashboards, Dataflow, Datamart and Dataset management</li></ul></li></ul><p><em>Note: we can see that Microsoft Fabric relies mainly on Azure Synapse and Power BI services.</em></p><p>Regarding the concept of <a href=https://learn.microsoft.com/en-us/fabric/enterprise/licenses>Capacity Fabric</a> :</p><ul><li>As all services are managed and serverless, the computing power/ressource available is defined by a <strong>Capacity Fabric</strong>.</li><li>A <strong>Capacity Fabric</strong> is specific to a Tenant (organization) and there can be several per organization.</li><li>Each <strong>Capacity Fabric</strong> represents a distinct set of resources allocated to Microsoft Fabric, and more specifically to the workspaces concerned.</li><li>The configuration size for a <strong>Capacity Fabric</strong> will determine the computing power available, and consequently the managed services that can be used.
You will find the list of configurations in the <a href=https://learn.microsoft.com/en-us/fabric/enterprise/licenses#capacity-and-skus>official documentation</a>.</li></ul><p>Hierarchy of elements:</p><ul><li>Level n°1 : OneLake is unique for the entire Tenant</li><li>Level n°2 : <a href=https://learn.microsoft.com/en-us/fabric/get-started/workspaces>Workspaces</a> (with logical grouping by <a href=https://learn.microsoft.com/en-us/fabric/governance/domains>domain</a>)</li><li>Level n°3 : Ressources (Lakehouse, Warehouse, KQL Database, SQL Endpoint, &mldr;)</li><li>Level n°4 : Objects (Files, Tables, Dashboard, Notebooks, &mldr;)</li></ul><p>A <a href=https://learn.microsoft.com/en-us/fabric/get-started/workspaces>workspace</a> is assigned to a <strong>Capacity Fabric</strong> and all managed services use the resources of this <strong>Capacity Fabric</strong> to run.</p><p>Centralized rights management (by roles/users) makes it possible to manage access by workspace and to manage rights to elements of the various services in a simplified way.</p><p>By default, Microsoft Fabric offers a visualization of the <a href=https://learn.microsoft.com/en-us/fabric/governance/lineage>lineage</a> of objects at workspace level.
<a href=/blog/web/20230724_Blog_MicrosoftFabric_03.png><img alt=schema_03 src=/blog/web/20230724_Blog_MicrosoftFabric_03.png></a></p><h2 id=about-the-lakehouse-part>About the Lakehouse part</h2><p>A <a href=https://learn.microsoft.com/en-us/fabric/data-engineering/lakehouse-overview>Lakehouse</a> will store data in the form of files or tables, using OneLake&rsquo;s default storage space.</p><p>Example of the Lakehouse interface :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_04.png><img alt=schema_04 src=/blog/web/20230724_Blog_MicrosoftFabric_04.png></a></p><p>Two engines are used:</p><ul><li>Apache Spark to transform and manipulate data</li><li>A SQL engine for reading data using T-SQL syntax</li></ul><p>When creating a Lakehouse, Microsoft Fabric creates two additional elements by default (<em>with the same name as the Lakehouse</em>):</p><ul><li>SQL Endpoint (SQL Engine)</li><li>Default Dataset (Data representation)</li></ul><p>SQL Endpoint allows to access data from tables defined at the Lakehouse level in read-only mode with the T-SQL syntax.
It also provides read-only access to tables in other Lakehouses and Warehouses in the same workspace.</p><p>The following actions can be performed with a SQL Endpoint:</p><ul><li>Query Lakehouse and Warehouse tables</li><li>Create views and procedures to encapsulate T-SQL queries</li><li>Manage object rights</li></ul><p>The default dataset allows PowerBI to access Lakehouse table data.
PowerBI reports can be created directly from Lakehouse data (<em>Tables directory only</em>) using the default dataset, or by creating a new dataset and defining an associated data model (<em>object link</em>).</p><p>The Lakehouse is composed of two root directories:</p><ul><li>The <strong>Tables</strong> directory represents data <strong>managed</strong> by the Lakehouse (<em>Delta format whose storage and metadata are managed directly by the Lakehouse</em>)</li><li>The <strong>Files</strong> directory represents data <strong>not managed</strong> by Lakehouse (<em>multiple user-managed data formats</em>).</li></ul><p>There are several ways to work with data in the Lakehouse:</p><ul><li><strong>Upload</strong>: Download local files or directories to the Lakehouse (<em>in the <strong>Files</strong> directory</em>) and load data into the <strong>Tables</strong> directory.</li><li><strong><a href=https://learn.microsoft.com/en-us/fabric/data-factory/dataflows-gen2-overview>Dataflows (Gen2)</a></strong> : Import and transform data from many sources and load them directly into Lakehouse tables</li><li><strong>Data Factory pipelines</strong> : Copy data and orchestrate data transformation and loading activities in the Tables or Files directories of the Lakehouse</li><li><strong>Notebooks</strong> : Working interactively with data with Apache Spark (Scala, Java, Python, R &mldr;)</li><li><strong><a href=https://learn.microsoft.com/en-us/fabric/onelake/onelake-shortcuts>Shortcuts</a></strong> : Connect to external storage (OneLake, Azure Data Lake Gen2, AWS S3)<ul><li>There are two types of Shortcuts :<ul><li>In the Files directory, this allows you to link to an external storage space so that you can work directly with the data in a secure manner.</li><li>In the Tables directory, this allows you to synchronize a table with a table from another Lakehouse.</li></ul></li></ul></li></ul><p>Comments :</p><ul><li>If you create several Lakehouses in the same <a href=https://learn.microsoft.com/en-us/fabric/get-started/workspaces>workspace</a>, you will have several SQL Endpoints but they will all have the same connection string.</li><li>Deleting a Lakehouse automatically deletes the associated default dataset and SQL Endpoint.</li></ul><p>Regarding the format of data that can be used in the Lakehouse :</p><ul><li>For the Files directory: PARQUET, CSV, AVRO, JSON and all formats compatible with Apache Hive</li><li>For the Tables directory: the default format is Delta</li></ul><p>In terms of storage, data are stored in the following spaces by default :</p><ul><li>Path with tables name : <code>&lt;workspace name>@onelake.dfs.fabric.microsoft.com/&lt;lakehouse name>.Lakehouse/Tables/*</code></li><li>Path with files name : <code>&lt;workspace name>@onelake.dfs.fabric.microsoft.com/&lt;lakehouse name>.Lakehouse/Files/*</code></li><li>Path with unique identifier (tables) : <code>&lt;workspace id>@onelake.dfs.fabric.microsoft.com/&lt;lakehouse id>/Tables/*</code></li></ul><h2 id=about-the-warehouse-part>About the Warehouse part</h2><p>This service is based on <a href=https://learn.microsoft.com/en-us/azure/synapse-analytics/sql/overview-architecture>Synapse Warehouse Serverless</a>, which uses T-SQL syntax to provide all database operations (<em>insert, update, delete, select, grant, &mldr;</em>) on the various objects managed.</p><p>Example of the Warehouse interface :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_05.png><img alt=schema_05 src=/blog/web/20230724_Blog_MicrosoftFabric_05.png></a></p><p>Data storage uses the OneLake storage and the Delta format (<em>which should be the default format</em>).
<em>Note: in the preview version, when you create a table without specifying the storage format, you end up with Hive&rsquo;s default format (which is not Delta format).</em></p><p>This service makes it possible to implement a relational modeling layer on top of data storage in the Lakehouse, and to benefit from all the features of a Warehouse (<em>ACID ownership, concurrency, rights management, schema organization, relational model&mldr;</em>).
Data can be easily explored using T-SQL queries or reporting tools such as PowerBI.
The Synapse Warehouse interface also supports T-SQL queries management (<em>create, save, modify, &mldr;.</em>).</p><p>Creating a Warehouse in a workspace generates the following elements :</p><ul><li>Creation of default schemas: dbo, guest, INFORMATION_SCHEMA and sys</li><li>Creation of a default dataset with the same name as the Warehouse for data access with PowerBI</li></ul><p>Comments :</p><ul><li>From a Warehouse, you can access Lakehouse tables as if they were simply a different database whose objects are stored in a schema named <strong>dbo</strong>, but in read-only mode. It is not possible to perform DML queries on Lakehouse objects from a Warehouse.</li><li>Lakehouse data must be copied (<em>for example, using the <a href=https://learn.microsoft.com/en-us/fabric/onelake/onelake-shortcuts>Shortcut</a></em>) to the Warehouse in order to be modified.</li><li>A Shortcut will have the same functionality for a Warehouse table as for a Lakehouse table</li></ul><p>In terms of storage, data is stored in the following space by default :</p><ul><li>Path with abfss format : <code>abfss://&lt;workspace id>@onelake.dfs.fabric.microsoft.com/&lt;warehouse id>/Tables/&lt;schema name>/&lt;table name></code></li><li>Path with https format : <code>https://onelake.dfs.fabric.microsoft.com/&lt;workspace id>/&lt;warehouse id>/Tables/&lt;schema name>/&lt;table name></code></li></ul><p>Information on the difference between a SQL Endpoint and a Warehouse :</p><ul><li>A SQL Endpoint is used only to perform <strong>select</strong> queries on Lakehouse or Warehouse data.</li><li>A Warehouse is used to have the full functionality of a serverless database (<em>ACID transactions, DML operations, &mldr;</em>).
More information can be found in the <a href=https://learn.microsoft.com/en-us/fabric/data-warehouse/data-warehousing#compare-the-warehouse-and-the-sql-endpoint-of-the-lakehouse>official documentation</a>.</li></ul><h2 id=about-the-kql-database-part>About the KQL Database part</h2><p><a href=https://learn.microsoft.com/en-us/azure/synapse-analytics/data-explorer/data-explorer-overview>Synapse Real-Time Analytics</a> is a managed and serverless service optimized for real-time data storage and analysis.
This service relies on a KQL database based on <a href=https://learn.microsoft.com/en-us/azure/data-explorer/data-explorer-overview>Data Explorer Database</a> and uses the <a href=https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/>Kusto Query (KQL)</a> language, enabling only the reading of data to return a result.</p><p>Example of the KQL Database interface :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_06.png><img alt=schema_06 src=/blog/web/20230724_Blog_MicrosoftFabric_06.png></a></p><p>The service comprises the following elements:</p><ul><li>A Kusto database (KQL Database) for managing collections of objects such as tables, functions, materialized views and shortcuts.</li><li>Data is read and manipulated using KQL Queryset, which can only be used to access and apply transformations to data, but not to modify table contents.</li><li>The <strong>Eventstream</strong> functionality makes it easy to integrate data from sources such as <strong>Event Hubs</strong>.</li></ul><p>KQL Database objects :</p><ul><li>A table stores data in tabular (columns and rows) and typed form.</li><li>A function is used to define an encapsulated query that can be used in a KQL query and can have a list of parameters as input.</li><li>A materialized view is used to pre-calculate the result of an encapsulated query to optimize data access times.</li><li>A datastream is a set of KQL eventstreams connected to the KQL Database.</li></ul><p>At the storage level :</p><ul><li>Path with https format : <code>https://francecentral-api.onelake.fabric.microsoft.com/&lt;workspace id>/&lt;KQL database id>/tables/&lt;table name></code></li></ul><p>Additional information on KQL Database :</p><ul><li>By default, KQL Database stores data in a columnar format, so the engine only needs to access the columns concerned by queries, rather than scanning all the data in an object.</li><li>KQL database is optimized for data that is only read, rarely deleted and never updated</li><li>KQL database is designed to accelerate data ingestion by not applying any of the constraints found on relational databases (PK, FK, Check, Uniqueness, &mldr;).</li><li>KQL database manages Shortcuts as external tables.</li></ul><p><em>Note: KQL Database data cannot be read from SQL Endpoint or Warehouse engine.</em></p><p>You can find out more about the comparison between Synapse Real-Time Analytics and Azure Data Explorer in the <a href=https://learn.microsoft.com/en-us/fabric/real-time-analytics/realtime-analytics-compare>official documentation</a>.</p><h2 id=about-the-powerbi-part>About the PowerBI part</h2><p>This is the service that is most prominently featured in the Microsoft Fabric solution.</p><p>All the resources and data managed by Microsoft Fabric (<em>and stored in OneLake</em>) can be accessed by <a href=https://powerbi.microsoft.com/en-us/blog/power-bi-embedded-with-microsoft-fabric/>PowerBI</a> to quickly add value and set up the reports and analyses you need.</p><p>The key element for using PowerBI is the dataset.
By default, when creating a Lakehouse or Warehouse, Microsoft Fabric automatically creates a default dataset, but it is possible to create your own datasets with the desired modeling to be able to use the data with PowerBI.</p><p>Regarding the concept of Dataset :</p><ul><li>A dataset is a semantic layer with metrics representing a set of objects stored in the various services and used to create reports and analyses.</li><li>Datasets are automatically synchronized with the state of the data in the Lakehouse or Warehouse, so there&rsquo;s no specific management or refreshing to do.</li><li>New objects in a Lakehouse or Warehouse are automatically added to the corresponding default datasets</li></ul><p>It&rsquo;s very easy to access all objects via datasets on all Microsoft Fabric services (Lakehouse, Warehouse, KQL database) with PowerBI, and to share the various elements created with other users.</p><p>I wasn&rsquo;t able to test the use of AI with <a href=https://powerbi.microsoft.com/en-us/blog/introducing-microsoft-fabric-and-copilot-in-microsoft-power-bi/>Copilot</a> for PowerBI, which is a feature put forward by Microsoft to facilitate the creation of reports and, in general, the analysis of data by people who aren&rsquo;t PowerBI experts.</p><h2 id=about-the-data-science-part>About the Data Science part</h2><p>The <a href=https://learn.microsoft.com/en-us/azure/synapse-analytics/machine-learning/what-is-machine-learning>Synapse Data Science</a> service manages all the elements (Notebooks, Models, Experiments) based on the MLflow framework to work on all Machine Learning needs.</p><p>All these elements use <a href=https://mlflow.org/docs/latest/index.html>MLflow</a>, an open source framework for tracking and managing experiments.</p><p>About notebooks :</p><ul><li>They enable you to work interactively on data with Apache Spark (Python, Scala, SQL, R).</li><li>They are automatically attached to an Apache Spark cluster</li><li>They enable you to read Lakehouse data using Apache Spark or Pandas dataframes.</li></ul><p>About experiments:</p><ul><li>An experiment consists of one or more executions of a notebook task.</li><li>Experiments can be created from the user interface or directly with the MLflow framework.</li></ul><p>About models :</p><ul><li>the MLflow framework enables models to be tracked and managed within Microsoft Fabric.</li><li>From an experiment, it is possible to save all elements in the form of a new model, with all associated metadata.</li></ul><h1 id=comments>Comments</h1><p>Warning: to activate Microsoft Fabric (preview), you must be a member of an <strong>Azure Active Directory</strong> and have the <strong>Power BI Administrator</strong> role.</p><p>The PowerBI user experience is the foundation of the Microsoft Fabric user experience.</p><p>At workspace level:</p><ul><li>Use of Azure DevOps only to manage sources (<em>no github or gitlab offered</em>) at workspace level</li><li>Lack of a hierarchy or directory system to organize the various elements within a workspace (<em>to improve comprehension and readability</em>).</li><li>We need to rely on strict standardization of object naming to be able to filter and sort them efficiently.</li><li>There is a <strong>messy</strong> effect when you start to have a certain number of elements in a workspace, as can be seen on the screens below</li></ul><p>Visualization of OneLake elements :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_07.png><img alt=schema_07 src=/blog/web/20230724_Blog_MicrosoftFabric_07.png></a>
<em>Note: This interface allows you to see the resources created (Lakehouse, Warehouse, KQL Database, SQL Endpoint, Dataset) but not directly the objects (files, tables, notebooks)</em>.</p><p>Visualization of workspace elements :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_08.png><img alt=schema_08 src=/blog/web/20230724_Blog_MicrosoftFabric_08.png></a>
<em>Note: This interface shows all workspace elements (resources and objects)</em>.</p><p>To help you navigate, you can filter by name or type of item :
<a href=/blog/web/20230724_Blog_MicrosoftFabric_09.png><img alt=schema_09 src=/blog/web/20230724_Blog_MicrosoftFabric_09.png></a></p><p>Notebook management is similar to Databricks without automatic versioning.
Using the explorer (<em>on the left of the interface</em>), it&rsquo;s very easy to generate a minimal syntax for loading data (<em>Tables or Files</em>) with Apache Spark (<em>automatic creation of a cell with minimal code</em>).</p><p>Some limitations when configuring an Apache Spark job:</p><ul><li>Use of a python script only</li><li>Possibility of downloading a local file or retrieving a file from ADLS Gen2 storage only</li><li>Ability to add a command line</li><li>Ability to add a reference Lakehouse to use relative paths (Files/&mldr;)</li><li>Limited job cluster configuration:<ul><li>Choice of scheduling</li><li>Choice of Apache runtime specific to Microsoft Fabric (see <a href=https://learn.microsoft.com/en-us/fabric/data-engineering/runtime>official documentation</a>)</li><li>No choice regarding worker configuration</li><li>Retry configuration in case of error</li></ul></li></ul><p>Data sharing:</p><ul><li>Lakehouse data does not appear to be shared with the Warehouse by default, unlike the SQL Endpoint, which has direct access to Lakehouse tables in the default <strong>dbo</strong> schema (<em>same default schema as the Warehouse</em>).</li><li>From a SQL Endpoint, you can add or remove the desired Warehouse and Lakehouse from the same workspace (<em>in order to view them in the explorer</em>)</li><li>Definition of foreign keys between different objects in the <strong>Model</strong> tab for easier use of <strong>Visual Query</strong> (<em>and for PowerBI</em>)</li><li>Very inefficient interface when making modifications in the <strong>Model</strong> tab<ul><li>As soon as you click on a column to make it invisible, you have to wait 1 to 2 seconds for all the objects in the interface to refresh, so when you want to perform this action several times, it&rsquo;s extremely slow and unpleasant.</li></ul></li><li>When creating a report :<ul><li>In the <strong>Data</strong> panel, all objects (<em>tables and views</em>) are displayed, even those not belonging to the defined <strong>Model</strong>.</li></ul></li></ul><p>In a medallion architecture logic, we end up with two possibilities:</p><ol><li>Use of a single Lakehouse for all zones<ul><li>The Bronze and Silver Zones are located in two different sub-directories in the <strong>Files</strong> directory of the Lakehouse.</li><li>The Gold Zone is located in the Lakehouse tables (<em>no schema operation</em>).<ul><li>This will make only the data in the Gold zone accessible to the greatest number of usages, through the use of a SQL Endpoint or a Warehouse.</li></ul></li></ul></li><li>Use of one Lakehouse per zone<ul><li>Allows you to manage everything at the tables level in each zone (per Lakehouse), and take advantage of all the functionalities available in all zones.</li><li>Additional cost in terms of resources and rights management</li></ul></li></ol><p>For data governance, it is possible to use <a href=https://learn.microsoft.com/en-us/fabric/governance/microsoft-purview-fabric>Microsoft Purview with Microsoft Fabric</a> and set up data lineage capture.</p><p>There&rsquo;s a Monitoring section to track the execution of processes/activities at the tenant level, but not the execution of resources/services directly.
<a href=/blog/web/20230724_Blog_MicrosoftFabric_10.png><img alt=schema_10 src=/blog/web/20230724_Blog_MicrosoftFabric_10.png></a></p><h1 id=conclusion>Conclusion</h1><p>Clearly, this is a coherent offering that enables data to be used in a multiplicity of ways, while limiting the duplication of data on different storage spaces.</p><p>Centralized data management facilitates data governance and sharing.</p><p>There&rsquo;s a real desire to push PowerBI as the single solution for data analysis.</p><p>This is a very interesting direction in data centralization, to limit the silo effect and facilitate data sharing and centralized governance (<em>in a Data Mesh approach for example</em>).</p><p>An important aspect of the development is the no-code (or low-code) principle, which enables to work on data without writing code (or minimal one), mainly using Synapse services.
This is a good idea if you want users who are not Data Engineers to be able to manage/use the data for experimentation and demonstration purposes, but when you want to industrialize data management and processing efficiently, this becomes a constraint that can be very costly in terms of time and energy.</p><p>Add to this the fact that you can&rsquo;t manage resource configuration, which is based directly on a Capacity Fabric, and you end up with ease of data use, but a loss of control over resources, and consequently costs.
<em>Note: A small exception is the Apache Spark Pool, which allows you to manage few parameters, such as the number and type of workers</em>.</p><p><strong>In conclusion</strong>, Microsoft Fabric is an all-in-one, ready for use solution that enables all types of users to manage and manipulate data in a unified space, but I think that a solution like Databricks or Snowflake is much more efficient (<em>performance, cost, industrialization</em>), while keeping the use of the PowerBI service for the Lakehouse, Warehouse, Data Science approach, centralized data governance and cost control, but won&rsquo;t enable people with few technical skills to work properly with data.</p></div></article></div></div><footer><div class="container-fluid prag-bg-primary prag-foot">Build With <a href=https://gohugo.io/>Hugo</a>
&nbsp; - &nbsp;
<a href=https://en.wikipedia.org/wiki/WTFPL>WTFPL license</a> © 2018–2024</div></footer></body></html>